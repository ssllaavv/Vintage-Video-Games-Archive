{# templates/widgets/custom_image_upload.html#}
{#<div class="custom-image-upload" id="wrapper_{{ widget.attrs.id }}">#}
{#    {% if widget.has_image %}#}
{#        <div class="image-preview-container">#}
{#            <img src="{{ widget.image_url }}" alt="Current image" class="image-preview">#}
{#            <div class="image-actions">#}
{#                <label class="upload-btn" for="{{ widget.attrs.id }}">Change</label>#}
{#                <button type="button" class="clear-btn" onclick="clearImage('{{ widget.attrs.id }}')">Clear</button>#}
{#            </div>#}
{#        </div>#}
{#    {% else %}#}
{#        <div class="upload-container">#}
{#            <label class="upload-btn" for="{{ widget.attrs.id }}">Upload Picture</label>#}
{#        </div>#}
{#    {% endif %}#}
{##}
{#    <input type="{{ widget.type }}"#}
{#           name="{{ widget.name }}"#}
{#           id="{{ widget.attrs.id }}"#}
{#           class="image-input"#}
{#           {% if widget.required %}required{% endif %}#}
{#           style="display: none;"#}
{#           onchange="handleImageUpload(this)">#}
{##}
{#     Hidden clear checkbox#}
{#    <input type="checkbox"#}
{#           name="{{ widget.name }}-clear"#}
{#           id="{{ widget.attrs.id }}-clear"#}
{#           class="clear-checkbox"#}
{#           style="display: none;">#}
{#</div>#}
{##}
{#<style>#}
{#    .custom-image-upload {#}
{#        max-width: 300px;#}
{#        margin: 1rem 0;#}
{#    }#}
{##}
{#    .image-preview-container {#}
{#        background: #2e3141;#}
{#        border: 2px solid #3c4250;#}
{#        border-radius: 4px;#}
{#        padding: 1rem;#}
{#        text-align: center;#}
{#    }#}
{##}
{#    .image-preview {#}
{#        max-width: 100%;#}
{#        height: auto;#}
{#        border-radius: 4px;#}
{#        margin-bottom: 1rem;#}
{#    }#}
{##}
{#    .image-actions {#}
{#        display: flex;#}
{#        gap: 1rem;#}
{#        justify-content: center;#}
{#    }#}
{##}
{#    .upload-container {#}
{#        background: #2e3141;#}
{#        border: 2px solid #3c4250;#}
{#        border-radius: 4px;#}
{#        padding: 2rem;#}
{#        text-align: center;#}
{#    }#}
{##}
{#    .upload-btn, .clear-btn {#}
{#        display: inline-block;#}
{#        padding: 0.5rem 1rem;#}
{#        background: #4c5c96;#}
{#        color: #ffffff;#}
{#        border: none;#}
{#        border-radius: 4px;#}
{#        cursor: pointer;#}
{#        font-family: "Source Sans Pro", Helvetica, sans-serif;#}
{#        font-size: 0.9rem;#}
{#        font-weight: 300;#}
{#        letter-spacing: 0.075em;#}
{#        text-transform: uppercase;#}
{#        text-decoration: none;#}
{#        transition: background-color 0.2s ease-in-out;#}
{#    }#}
{##}
{#    .clear-btn {#}
{#        background: #953e3e;#}
{#    }#}
{##}
{#    .upload-btn:hover {#}
{#        background: #5d6dad;#}
{#    }#}
{##}
{#    .clear-btn:hover {#}
{#        background: #a84444;#}
{#    }#}
{##}
{#    .image-input, .clear-checkbox {#}
{#        display: none;#}
{#    }#}
{#</style>#}
{##}

{# templates/widgets/custom_image_upload.html #}
<div id="wrapper_{{ widget.attrs.id }}" class="custom-image-upload field">
    {% if widget.has_image %}
        <div class="image-preview-container">
            <img src="{{ widget.image_url }}" alt="Current image" class="image-preview">
            <div class="image-actions">
                <label for="{{ widget.attrs.id }}" class="button primary small">Change</label>
                <button type="button" class="button small" onclick="clearImage('{{ widget.attrs.id }}')">Clear</button>
            </div>
        </div>
    {% else %}
        <div class="upload-container">
            <label for="{{ widget.attrs.id }}" class="button primary small">Upload Picture</label>
        </div>
    {% endif %}

    <input type="file"
           name="{{ widget.name }}"
           id="{{ widget.attrs.id }}"
           {% if widget.is_required %}required{% endif %}
           class="image-input"
           onchange="handleImageUpload(this)"
           accept="image/*"
           style="display: none;">

    <input type="checkbox"
           name="{{ widget.name }}-clear"
           id="{{ widget.attrs.id }}-clear"
           class="clear-checkbox"
           style="display: none;">
</div>

<style>
     /* Custom Image Upload Styles - Solid State */
.custom-image-upload {
    margin-bottom: 2em;
    border: solid 1px rgba(255, 255, 255, 0.15);
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.05);
}

.upload-container {
    padding: 2em;
    text-align: center;
    cursor: pointer;
}

.image-preview-container {
    text-align: center;
    padding: 2em;
}

.image-preview {
    max-width: 100%;
    max-height: 300px;
    border-radius: 4px;
    margin-bottom: 1em;
}

.image-actions {
    display: flex;
    justify-content: center;
    gap: 1em;
    margin-top: 1em;
}

/* Remove custom button styles as we're using Solid-State's default classes */
</style>